<!-- Adapted from Bootstrap homepage. -->
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

  <title>Turbine Output Website</title>
  </head>
  <body class = "text-center">
    <div class = "header">
    <h6 class = "display-3">Emerging Technologies Project</h2>
    <h6 class = "display-3">Wind turbine power output</h3>
    </div>
    
    <!--Adapted from https://getbootstrap.com/docs/5.0/forms/layout/-->
    <form>
      <form class = "container center_div">
        <div class="form-group">
            <label for = "speedInput"> Please enter wind speed: </label>
            <input type="text" id="speedInput" class="form-control" placeholder="Wind speed: " >
        </div>
        <!--Adapted from https://getbootstrap.com/docs/5.0/components/buttons/-->
        <button id = "submit-btn" type="button" class="submit" class="btn btn-warning">Submit speed value</button>
      </form>
        
      <div class= "font-weight-bold" id="output"></div> Power (Watts)</p>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

      <script>
            
      // Adapted from 
      // https://dmitripavlutin.com/javascript-fetch-async-await/  
      // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch

      // Post method implementation
      async function postData()
      {
        // Getting the speed value
        const value = document.getElementById('speedInput').value;
        // Fetching the appropriate post power responce
        const response = await fetch('/power', {
          method: 'POST', 
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({value})
          });

          var resp = await response.json();
          // Getting space where to print data to and predicting power value
          document.getElementById("output").innerHTML=resp.prediction[0]
          console.log(resp)
        }

        document.getElementById("submit-btn").addEventListener("click", postData);
      </script>
  </body>
</html>
